(function(t){function e(e){for(var a,l,r=e[0],s=e[1],c=e[2],u=0,p=[];u<r.length;u++)l=r[u],n[l]&&p.push(n[l][0]),n[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],a=!0,l=1;l<o.length;l++){var s=o[l];0!==n[s]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=o[0]))}return t}var a={},n={app:0},i=[];function l(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"51472d52"}[t]+".js"}function r(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(t){var e=[],o=n[t];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise(function(e,a){o=n[t]=[e,a]});e.push(o[2]=a);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=l(t),i=function(e){s.onerror=s.onload=null,clearTimeout(c);var o=n[t];if(0!==o){if(o){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,l=new Error("Loading chunk "+t+" failed.\n("+a+": "+i+")");l.type=a,l.request=i,o[1](l)}n[t]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:s})},12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(e)},r.m=t,r.c=a,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(o,a,function(e){return t[e]}.bind(null,a));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var d=c;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"0aab":function(t,e,o){},"0e35":function(t,e,o){},"11fb":function(t,e,o){t.exports=o.p+"img/dazhe2.27a39c58.jpg"},"20c7":function(t,e,o){},"23bf":function(t,e,o){"use strict";var a=o("0aab"),n=o.n(a);n.a},"4b53":function(t,e,o){"use strict";var a=o("0e35"),n=o.n(a);n.a},"546a":function(t,e,o){"use strict";var a=o("e2b9"),n=o.n(a);n.a},5522:function(t,e,o){t.exports=o.p+"img/dushu.42ba9035.jpeg"},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var a=o("2b0e"),n=o("5c96"),i=o.n(n),l=(o("0fae"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{attrs:{id:"nav"}}),o("router-view")],1)}),r=[],s={name:"App",components:{}},c=s,u=o("2877"),d=Object(u["a"])(c,l,r,!1,null,null,null),p=d.exports,h=o("8c4f"),b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("IndexOfBook",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},m=[],f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello"},[o("el-container",[o("el-header",[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:t.searchChange}},[t._v(t._s(t.user))])],1),o("el-col",{attrs:{span:12,align:"right"}},[o("el-dropdown",[o("el-button",{staticClass:"el-dropdown-link primary",attrs:{type:"primary"}},[t._v("下拉菜单\n            "),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{staticClass:"button2"},[o("el-row",[o("el-button",{attrs:{type:"primary"},on:{click:t.shopCar}},[t._v("购物车")])],1)],1),o("el-dropdown-item",{staticClass:"button2"},[o("el-row",[o("el-button",{attrs:{type:"primary"},on:{click:t.myOrder}},[t._v("我的订单")])],1)],1),o("el-dropdown-item",{staticClass:"button2"},[o("el-row",[o("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1),o("el-dropdown-item",{staticClass:"button2"},[o("el-row",[o("el-button",{attrs:{type:"primary"},on:{click:t.Register}},[t._v("注册")])],1)],1)],1)],1)],1)],1)],1),o("el-container",[o("el-aside",{attrs:{width:"20%"}},[o("el-row",[o("el-col",[o("el-input",{attrs:{typeof:"text",placeholder:"请输入查询书籍",id:"input1"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchChange(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),1==t.searchVisible?o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bookData.filter(function(e){return!t.search||e.title.includes(t.search)}),stripe:""}},[o("el-table-colum",[o("el-table-column",{attrs:{prop:"title",label:"书名",sortable:""}}),o("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.toBook(e.row.book_id)}}},[t._v("see it")])]}}],null,!1,2886522779)})],1)],1):t._e()],1)],1)],1),o("el-main",[o("el-row",[o("el-carousel",{attrs:{"indicator-position":"outside"}},t._l(6,function(e){return o("el-carousel-item",{key:e},[o("img",{attrs:{src:t.slidePic[e].images,alt:"",id:"caimg"}})])}),1)],1),o("hr"),t._l(Math.floor(t.bookData.length/3),function(e){return o("el-row",{key:e},[o("el-col",{attrs:{span:8}},[o("el-row",[o("a",{on:{click:function(o){t.toBook(t.bookData[3*(e-1)].book_id)}}},[o("img",{staticClass:"img-thumbnail book",attrs:{src:t.bookData[3*(e-1)].cover}})])]),o("el-row",[o("el-button",{attrs:{type:"text",id:"book"},on:{click:function(o){t.toBook(t.bookData[3*(e-1)].book_id)}}},[t._v(t._s(t.bookData[3*(e-1)].title))]),o("router-view")],1)],1),o("el-col",{attrs:{span:8}},[o("el-row",[o("a",{on:{click:function(o){t.toBook(t.bookData[3*(e-1)+1].book_id)}}},[o("img",{staticClass:"img-thumbnail book",attrs:{src:t.bookData[3*(e-1)+1].cover}})])]),o("el-row",[o("el-button",{attrs:{type:"text",id:"book"},on:{click:function(o){t.toBook(t.bookData[3*(e-1)+1].book_id)}}},[t._v(t._s(t.bookData[3*(e-1)+1].title))]),o("router-view")],1)],1),o("el-col",{attrs:{span:8}},[o("el-row",[o("a",{on:{click:function(o){t.toBook(t.bookData[3*(e-1)+2].book_id)}}},[o("img",{staticClass:"img-thumbnail book",attrs:{src:t.bookData[3*(e-1)+2].cover}})])]),o("el-row",[o("el-button",{attrs:{type:"text",id:"book"},on:{click:function(o){t.toBook(t.bookData[3*(e-1)+2].book_id)}}},[t._v(t._s(t.bookData[3*(e-1)+2].title))]),o("router-view")],1)],1)],1)}),t.bookData.length%3===1?o("el-row",{key:t.o},[o("el-col",{attrs:{span:8}},[o("el-row",[o("a",{on:{click:function(e){return t.toBook(t.bookData[t.bookData.length-1].book_id)}}},[o("img",{staticClass:"img-thumbnail book",attrs:{src:t.bookData[t.bookData.length-1].cover}})])]),o("el-row",[o("el-button",{attrs:{type:"text",id:"book"},on:{click:function(e){return t.toBook(t.bookData[t.bookData.length-1].book_id)}}},[t._v(t._s(t.bookData[t.bookData.length-1].title))]),o("router-view")],1)],1)],1):t._e(),t.bookData.length%3===2&&t.bookData.length>1?o("el-row",{key:t.o},[o("el-col",{attrs:{span:8}},[o("el-row",[o("a",{on:{click:function(e){return t.toBook(t.bookData[t.bookData.length-2].book_id)}}},[o("img",{staticClass:"img-thumbnail book",attrs:{src:t.bookData[t.bookData.length-2].cover}})])]),o("el-row",[o("el-button",{attrs:{type:"text",id:"book"},on:{click:function(e){return t.toBook(t.bookData[t.bookData.length-2].book_id)}}},[t._v(t._s(t.bookData[t.bookData.length-2].title))]),o("router-view")],1)],1),o("el-col",{attrs:{span:8}},[o("el-row",[o("a",{on:{click:function(e){return t.toBook(t.bookData[t.bookData.length-1].book_id)}}},[o("img",{staticClass:"img-thumbnail book",attrs:{src:t.bookData[t.bookData.length-1].cover}})])]),o("el-row",[o("el-button",{attrs:{type:"text",id:"book"},on:{click:function(e){return t.toBook(t.bookData[t.bookData.length-1].book_id)}}},[t._v(t._s(t.bookData[t.bookData.length-1].title))]),o("router-view")],1)],1)],1):t._e()],2)],1),o("el-footer",[o("p",[t._v("购物指南")])])],1)],1)},g=[],k=(o("6b54"),o("7f7f"),{name:"IndexOfBook",props:{msg:String},mounted:function(){this.loadBooks()},data:function(){return{slidePic:[{images:o("bb66"),name:"hhh"},{images:o("11fb"),name:"hhh"},{images:o("fe94"),name:"hhh"},{images:o("767f"),name:"hhh"},{images:o("9a08"),name:"hhh"},{images:o("11fb"),name:"hhh"},{images:o("767f"),name:"hhh"}],inputBook:"",book:"",title:[],author:[],book_id:[],bookData:[],search:[],searchVisible:0,user:this.GLOBAL.name}},methods:{login:function(){this.$router.push({path:"/login"})},returndata:function(){this.$myAxios.get("/ebook/addUser",{params:{id:61,name:"wangxiaobo",phone:"123444",email:"123@123.com"}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}).then(function(){})},Register:function(){this.$router.push({path:"/Register"})},searchChange:function(){1==this.searchVisible?this.searchVisible=0:this.searchVisible=1},shopCar:function(){this.$router.push({path:"/shopCar"})},myOrder:function(){this.$router.push({path:"/myOrder"})},loadBooks:function(){var t=this;this.$myAxios.get("/ebook/allBooks").then(function(e){for(var o=t,a=0;a<e.data.length;a++){var n={book_id:e.data[a].book_id,title:e.data[a].title,author:e.data[a].author,language:e.data[a].language,price:e.data[a].price,stock:e.data[a].stock,cover:"data:image/png;base64,"+e.data[a].cover.toString()};o.bookData.push(n)}t.$forceUpdate()}).catch(function(t){console.log(t)})},toBook:function(t){this.GLOBAL.book_id=t,console.log(this.GLOBAL.id),console.log(this.GLOBAL.book_id),this.$router.push({path:"/book"})}}}),v=k,_=(o("6940"),Object(u["a"])(v,f,g,!1,null,"94495e98",null)),w=_.exports,y={name:"home",components:{IndexOfBook:w}},C=y,x=(o("546a"),Object(u["a"])(C,b,m,!1,null,"1fb3aa2c",null)),D=x.exports,$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bookInfo"},[o("el-container",[o("el-header",[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-button-group",[o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toMain}},[t._v("全部商品分类")])],1)],1),o("el-col",{attrs:{span:12,align:"right"}},[o("el-button-group",[o("el-button",{staticClass:"button2",attrs:{type:"primary"},on:{click:t.shopCar}},[t._v("购物车")]),o("el-button",{staticClass:"button2",attrs:{type:"primary"},on:{click:t.myOrder}},[t._v("我的订单")])],1)],1)],1)],1),o("el-main",{staticStyle:{"text-align":"left"}},[o("el-row",[o("el-col",{attrs:{span:5}},[o("a",[o("img",{staticClass:"img-thumbnail book1",attrs:{src:t.cover,alt:""}})])]),o("el-col",{attrs:{span:14}},[o("el-row",[o("h1",{staticStyle:{"text-align":"left"}},[t._v("书籍介绍")])]),o("el-row",[o("el-row",[t._v("题目:"+t._s(t.title))]),o("el-row",[t._v("作者:"+t._s(t.author))]),o("el-row",[t._v("语言:"+t._s(t.language))]),o("el-row",[t._v("价格:"+t._s(t.price))])],1),o("el-row",[o("el-button-group",[o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("加入购物车")]),o("el-dialog",{attrs:{title:"加入购物车",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-row",[o("el-col",[o("a",[o("img",{staticClass:"img-thumbnail book2",attrs:{src:t.cover}})])])],1),o("el-row",[o("el-col",[o("h1",[t._v(t._s(t.title))])])],1),o("el-input-number",{attrs:{min:1,max:10,label:"数量"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button-group",[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:t.addcart}},[t._v("确 定")])],1)],1)],1),o("el-button",{attrs:{type:"primary"},on:{click:t.first}},[t._v("马上购买")]),o("el-button",{attrs:{type:"primary"},on:{click:t.changedialogVisible}},[t._v("添加书评")])],1)],1)],1),o("el-col",{attrs:{span:5}},[t._v("推荐书籍")])],1),o("el-row",[o("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"书籍梗概",name:"first"}},[t._v("这是一本神奇的书")]),o("el-tab-pane",{attrs:{label:"读者书评",name:"second"}},[o("el-row",[o("el-dialog",{attrs:{title:"增加评价",visible:t.comdialogVisible,width:"30%"},on:{"update:visible":function(e){t.comdialogVisible=e}}},[o("el-row",[o("el-col",[o("el-row",[o("el-col",[o("h3",[t._v(t._s(t.title))])])],1)],1),o("el-col",[o("el-row",[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.commentarea,callback:function(e){t.commentarea=e},expression:"commentarea"}})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button-group",[o("el-button",{on:{click:function(e){t.comdialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:t.addcomment}},[t._v("确 定")])],1)],1)],1)],1),o("el-row",[o("div",{staticClass:"content-2"},t._l(t.commentData,function(e){return o("ul",{key:e,staticClass:"qua_nav"},[o("li",[t._v('用户"@'+t._s(e["user_id"])+'"说:'+t._s(e["comment"]))]),o("br")])}),0)])],1)],1)],1),o("el-row",[o("div",[o("h3",{staticClass:"title"},[t._v("\n                猜您喜欢\n            ")])])]),o("el-row",[o("el-col",{attrs:{span:12,offset:6}},[o("a",[o("img",{staticClass:"img-thumbnail book2",attrs:{src:t.cover}})]),o("a",[o("img",{staticClass:"img-thumbnail book2",attrs:{src:t.cover}})]),o("a",[o("img",{staticClass:"img-thumbnail book2",attrs:{src:t.cover}})]),o("a",[o("img",{staticClass:"img-thumbnail book2",attrs:{src:t.cover}})])])],1)],1),o("el-footer",[t._v("购物指南")])],1)],1)},B=[],O={name:"book",data:function(){return{num:1,dialogVisible:!1,book_id:0,language:"",author:"",title:"",cover:"",price:0,user_id:this.GLOBAL.id,activeName:"second",commentarea:"",comdialogVisible:!1,commentData:[]}},mounted:function(){this.initBook()},methods:{handleClick:function(t,e){console.log(t,e)},toMain:function(){this.$router.push({path:"/"})},shopCar:function(){this.$router.push({path:"/shopCar"})},myOrder:function(){this.$router.push({path:"/myOrder"})},initBook:function(){var t=this;this.$myAxios.get("/ebook/findBooks",{params:{book_id:t.GLOBAL.book_id}}).then(function(e){t.book_id=e.data.book_id,t.author=e.data.author,t.title=e.data.title,t.language=e.data.language,t.price=e.data.price,t.cover="data:image/png;base64,"+e.data.cover.toString()}).catch(function(t){console.log(t)}).then(function(){t.$options.methods.loadComment.bind(t)()})},first:function(){alert("你应该先加入购物车")},addcart2:function(){var t=this;this.$myAxios.get("/ebook/addCart2",{params:{book_id:t.book_id,num:t.num,user_id:t.user_id,title:t.title}}).then(function(e){console.log(t.user_id),console.log(e)}).catch(function(t){console.log(t)}).then(function(){})},addcart:function(){this.dialogVisible=!1;var t=this;this.$myAxios.get("/ebook/addCart1",{params:{book_id:t.book_id,num:t.num,user_id:t.user_id,title:t.title}}).then(function(e){console.log(t.user_id),console.log(e)}).catch(function(e){""!=e&&t.$options.methods.addcart2.bind(t)()}).then(function(){}),console.log(t.GLOBAL.id)},addcomment:function(){this.changedialogVisible();var t=this,e=new FormData;e.set("user_id",t.user_id),e.set("book_id",t.book_id),e.set("comment",this.commentarea),t.$myAxios({method:"post",url:"/ebook/saveComment",data:e,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){console.log(e),e.data&&(alert("评论书本成功"),t.$options.methods.loadComment.bind(t)())}).catch(function(t){console.log(t)}).then(function(){})},loadComment:function(){this.commentData=[];var t=this;this.$myAxios.get("/ebook/findAllBybid",{params:{book_id:t.book_id}}).then(function(e){console.log(e);for(var o=0;o<e.data.length;o++){var a={comment_id:e.data[o].cid,user_id:e.data[o].uid,comment:e.data[o].comment};t.commentData.push(a),console.log(t.commentData[o].comment)}t.$forceUpdate()}).catch(function(t){console.log(t)})},changedialogVisible:function(){1==this.comdialogVisible?this.comdialogVisible=0:this.comdialogVisible=1}}},A=O,S=(o("a10e"),Object(u["a"])(A,$,B,!1,null,"11375add",null)),L=S.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("el-container",[a("el-header",[a("el-row",[a("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toMain}},[t._v("全部商品分类")])],1)],1),a("el-main",[a("el-row",{attrs:{id:"top"}}),a("el-row",{attrs:{id:"login"}},[a("el-col",{attrs:{span:10,offset:2}},[a("a",[a("img",{staticClass:"img-thumbnail ",staticStyle:{"border-radius":"10%"},attrs:{src:o("5522"),id:"img"}})])]),a("el-col",{attrs:{span:10}},[a("el-form",[a("el-row",[a("h2",[t._v("e-book登录")])]),a("el-row",[a("hr")]),a("el-form-item",[a("el-row",[a("el-input",{staticClass:"input",attrs:{placeholder:"账号"},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}})],1)],1),a("el-form-item",[a("el-row",[a("el-input",{staticClass:"input",attrs:{placeholder:"密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("el-form-item",[a("el-row",[a("el-select",{staticClass:"input",attrs:{placeholder:"身份"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-option",{attrs:{value:"user",label:"用户"}}),a("el-option",{attrs:{value:"manager",label:"管理员"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-button",{staticClass:"button",attrs:{type:"primary",round:""},on:{click:t.toMyorder}},[t._v("登录")])],1),a("el-col",[a("el-button",{staticClass:"button",attrs:{type:"success",round:""},on:{click:t.toRegister}},[t._v("注册")])],1)],1),a("br")],1)],1)],1)],1),a("el-footer",[a("p",[t._v("购物指南")])])],1)],1)},I=[],T={name:"login",data:function(){return{id:"",password:"",status:"",name:""}},methods:{toMain:function(){this.$router.push({path:"/"})},toRegister:function(){this.$router.push({path:"/Register"})},toMyorder:function(){var t=this;this.$myAxios.get("/ebook/check",{params:{id:this.id,password:this.password,status:this.status}}).then(function(e){console.log(e),"200"==e.status?(console.log(e.data.name),"manager"==e.data.status&&e.data.status==t.status?1==e.data.usable?t.$router.push({path:"/Table",query:{id:e.data.id,password:e.data.password,status:e.data.status,name:e.data.name}}):alert("当前账户不可用"):"user"==e.data.status&&e.data.status==t.status?1==e.data.usable?t.$router.push({path:"/myOrder",query:{id:e.data.id,password:e.data.password,status:e.data.status,name:e.data.name}}):alert("当前账户不可用"):alert("您的身份错误"),t.GLOBAL.id=e.data.id,t.GLOBAL.name=e.data.name,t.GLOBAL.isLogin=1,console.log(t.GLOBAL.id),console.log(t.GLOBAL.id),console.log(t.GLOBAL.isLogin)):alert("用户名或密码错误")}).catch(function(t){console.log(t),alert("用户名或密码错误")}).then(function(){})}}},M=T,j=(o("4b53"),Object(u["a"])(M,V,I,!1,null,"1a309b92",null)),U=j.exports,P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"shopCar"},[o("el-container",[o("el-header",[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-button-group",[o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toMain}},[t._v("全部商品分类")])],1)],1),o("el-col",{attrs:{span:12,align:"right"}},[o("el-button-group",[o("el-button",{staticClass:"button2",attrs:{type:"primary"},on:{click:t.myOrder}},[t._v("我的订单")])],1)],1)],1)],1),o("el-main",[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-col",{attrs:{span:4}},[o("span",[t._v("购物车商品")])]),o("el-col",{attrs:{span:4}},[o("span",[t._v("作者")])]),o("el-col",{attrs:{span:4}},[o("span",[t._v("语言")])]),o("el-col",{attrs:{span:4}},[o("span",[t._v("总价")])]),o("el-button",{staticStyle:{padding:"1px 0"},attrs:{type:"text"}},[t._v("操作按钮")])],1),t._l(t.bookData.length,function(e){return o("div",{key:e,staticClass:"text item"},[o("hr"),o("el-col",{attrs:{span:4}},[t._v(t._s(t.bookData[e-1].title+" "))]),o("el-col",{attrs:{span:4}},[t._v(t._s(t.bookData2[e-1].author+" "))]),o("el-col",{attrs:{span:4}},[t._v(t._s(t.bookData2[e-1].language+" "))]),o("el-col",{attrs:{span:4}},[t._v(t._s(t.bookData2[e-1].price*t.bookData[e-1].num+" "))]),o("el-input-number",{attrs:{min:1,max:10,label:"数量",position:"relative"},on:{change:t.handleChange},model:{value:t.bookData[e-1].num,callback:function(o){t.$set(t.bookData[e-1],"num",o)},expression:"bookData[o-1].num"}}),o("el-button-group",[o("el-checkbox",{attrs:{border:""},on:{click:function(o){return t.changeIn(t.bookData[e-1].inbuffer,t.bookData2[e-1].price,t.bookData[e-1].num)}},model:{value:t.bookData[e-1].inbuffer,callback:function(o){t.$set(t.bookData[e-1],"inbuffer",o)},expression:"bookData[o-1].inbuffer"}}),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(o){return t.deleteCart(t.bookData[e-1].book_id)}}}),o("el-button",{attrs:{type:"primary"},on:{click:function(o){return t.addOrder(t.bookData2[e-1].book_id,t.bookData2[e-1].price,t.bookData[e-1].num)}}},[t._v("立即购买")])],1)],1)})],2),o("br"),o("div",{attrs:{align:"right"}},[o("el-row",[t._v("共计："+t._s(t.total))]),o("el-button-group",[o("el-button",{attrs:{type:"primary",position:"relative",align:"right"},on:{click:t.addOrderBooks}},[t._v("全部购买")])],1)],1)],1),o("el-footer",[t._v("购物指南")])],1)],1)},G=[],E={name:"shopCar",data:function(){return{search:"",bookData:[],bookData2:[],orderData:[],orderData2:[],total:0}},mounted:function(){this.loadCart()},methods:{toMain:function(){this.$router.push({path:"/"})},myOrder:function(){this.$router.push({path:"/myOrder"})},delete:function(){},handleChange:function(t){console.log(t)},loadCart:function(){var t=this;console.log(t.GLOBAL.id),this.$myAxios.get("/ebook/allCarts",{params:{user_id:t.GLOBAL.id}}).then(function(e){for(var o=0;o<e.data.length;o++){var a={title:e.data[o].title,num:e.data[o].num,book_id:e.data[o].book_id,inbuffer:0};t.bookData.push(a)}t.$forceUpdate(),t.$options.methods.loadCartBook.bind(t)()}).catch(function(t){console.log(t)})},loadCartBook:function(){for(var t=0;t<this.bookData.length;t++){var e=this;console.log(e.bookData.length+"length"),this.$myAxios.get("/ebook/findBooks",{params:{book_id:e.bookData[t].book_id}}).then(function(t){var o={book_id:t.data.book_id,author:t.data.author,language:t.data.language,price:t.data.price};e.bookData2.push(o)}).catch(function(t){console.log(t)})}this.$forceUpdate()},addOrder:function(t,e,o){console.log(t),console.log(e),console.log(o),console.log(this.GLOBAL.id);var a=this;this.$myAxios.get("/ebook/addItem",{params:{user_id:a.GLOBAL.id,book_id:t,price:e,num:o}}).then(function(e){console.log(e),a.$options.methods.deleteCart.bind(a)(t),"Saved"==e.data&&alert("购买成功"),a.$router.push({path:"/myOrder"})}).catch(function(t){console.log(t)}).then(function(){})},changeIn:function(t,e,o){this.total+=e*o,console.log(this.total),t=0==t?1:0,this.$forceUpdate()},addOrderBooks:function(){this.orderData=[],this.orderData2=[];for(var t=0;t<this.bookData.length;t++)1==this.bookData[t].inbuffer&&(this.orderData.push(this.bookData[t]),this.orderData2.push(this.bookData2[t]));var e=this.orderData,o=this.orderData2,a=this;this.$myAxios.get("/ebook/addOrder",{params:{user_id:a.GLOBAL.id}}).then(function(t){console.log(t.data);for(var n=0;n<a.orderData.length;n++)a.$options.methods.additem2.bind(a)(e[n].book_id,o[n].price,e[n].num,t.data),a.$options.methods.deleteCart.bind(a)(e[n].book_id);alert("购买成功"),a.$router.push({path:"/myOrder"})}).catch(function(t){console.log(t)})},deleteCart:function(t){var e=this;this.$myAxios.get("/ebook/deleteCart",{params:{book_id:t,user_id:e.GLOBAL.id}}).then(function(t){console.log(t),e.$forceUpdate()}).catch(function(t){console.log(t)}).then(function(){})},additem2:function(t,e,o,a){console.log(t,e,o,a);var n=this;this.$myAxios.get("/ebook/addItem2",{params:{user_id:n.GLOBAL.id,book_id:t,price:e,num:o,oid:a}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}}},z=E,R=Object(u["a"])(z,P,G,!1,null,"0bb3e10d",null),N=R.exports,F=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"myOrder"},[o("el-container",[o("el-header",[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-button-group",[o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toMain}},[t._v("全部商品分类")])],1)],1),o("el-col",{attrs:{span:12,align:"right"}},[o("el-button-group",[o("el-button",{staticClass:"button2",attrs:{type:"primary"},on:{click:t.shopCar}},[t._v("购物车")])],1)],1)],1)],1),o("el-main",[o("div",{staticClass:"block"},[o("span",{staticClass:"demonstration"}),o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始日期时间"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),o("span",{staticClass:"demonstration"}),o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}),o("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.searchOrder(t.value1,t.value2)}}},[t._v("开始查询")])],1),o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-col",{attrs:{span:4}},[o("span",[t._v("订单号")])]),o("el-col",{attrs:{span:4}},[o("span",[t._v("用户号")])]),o("el-col",{attrs:{span:8}},[o("span",[t._v("订单时间")])]),o("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"}},[t._v("操作按钮")])],1),t._l(t.orderData.length,function(e){return o("div",{key:e,staticClass:"text item"},[o("el-row",{staticStyle:{height:"200px"}},[o("el-col",[o("el-col",{attrs:{span:4}},[o("el-row",[t._v(t._s(t.orderData[e-1].order_id+" "))])],1),o("el-col",{attrs:{span:4}},[t._v(t._s(t.orderData[e-1].user_id+" "))]),o("el-col",{attrs:{span:8}},[t._v(t._s(t.orderData[e-1].order_time+" "))]),o("el-button-group",[o("el-button",{attrs:{type:"danger",position:"relative",icon:"el-icon-delete"},on:{click:function(o){return t.deleteOrder(t.orderData[e-1].order_id)}}}),o("el-button",{attrs:{type:"primary",position:"relative"},on:{click:function(o){return t.orderInfo(t.orderData[e-1].order_id)}}},[t._v("查看详情")]),o("el-dialog",{attrs:{title:"订单详情",visible:t.orderVisible,width:"30%"},on:{"update:visible":function(e){t.orderVisible=e}}},[t._l(t.itemInfo.length,function(e){return o("div",{key:e,staticClass:"text item",attrs:{align:"left"}},[o("hr"),o("el-row",[t._v("书的ISBN号: "+t._s(t.itemInfo[e-1].item_id+" "))]),o("el-row",[t._v("书名: "+t._s(t.title[e-1]+" "))]),o("el-row",[t._v("数量: "+t._s(t.itemInfo[e-1].item_count+" "))]),o("el-row",[t._v("价格:"+t._s(t.itemInfo[e-1].price+" "))]),o("el-row",[t._v("总价:"+t._s(t.itemInfo[e-1].price*t.itemInfo[e-1].item_count+" "))]),o("hr")],1)}),o("div",[o("el-row",[t._v("共计:"+t._s(t.totalCost))])],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button-group",[o("el-button",{on:{click:function(e){t.orderVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.orderVisible=!1}}},[t._v("确 定")])],1)],1)],2)],1),o("br")],1)],1)],1)})],2)],1),o("el-footer",[t._v("购物指南")])],1)],1)},q=[],Y=o("7618"),Z={name:"myOrder",data:function(){return{search:"",orderData:[],id:this.GLOBAL.id,password:this.$route.query.password,status:this.$route.query.status,name:this.$route.query.name,orderVisible:!1,itemInfo:[],title:[],totalCost:0,value1:"",value2:""}},mounted:function(){this.loadOrder()},methods:{toMain:function(){this.$router.push({path:"/"})},shopCar:function(){this.$router.push({path:"/shopCar"})},loadOrder:function(){var t=this;this.$myAxios.get("/ebook/allOrders",{params:{user_id:t.GLOBAL.id}}).then(function(e){console.log(e.data);for(var o=0;o<e.data.length;o++){var a={order_id:e.data[o].id,order_time:t.timeFormat(e.data[o].orderTime),order_time2:e.data[o].orderTime,user_id:e.data[o].user_id};console.log("type= "+Object(Y["a"])(e.data[o].orderTime)),t.orderData.push(a)}t.$forceUpdate()}).catch(function(t){console.log(t)})},searchOrder:function(t,e){console.log(t+"   "+e),this.orderData=[];var o=this;this.$myAxios.get("/ebook/searchOrders",{params:{start:t.toString(),end:e.toString()}}).then(function(t){console.log(t.data);for(var e=0;e<t.data.length;e++){var a={order_id:t.data[e].id,order_time:o.timeFormat(t.data[e].orderTime),user_id:t.data[e].user_id};o.orderData.push(a)}o.$forceUpdate()}).catch(function(t){console.log(t)})},timeFormat:function(t){var e=new Date(t),o=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),i=e.getHours(),l=e.getMinutes(),r=e.getSeconds(),s=o+"/";return a<10&&(s+="0"),s+=a+"/",n<10&&(s+="0"),s+=n+" ",i<10&&(s+="0"),s+=i+":",l<10&&(s+="0"),s+=l+":",r<10&&(s+="0"),s+=r,s},orderInfo:function(t){this.title=[],this.itemInfo=[],this.totalCost=0,this.orderVisible=!0;var e=this;this.$myAxios.get("/ebook/orderInfo",{params:{oid:t}}).then(function(t){console.log(t.data);for(var o=0;o<t.data.length;o++){var a={item_count:t.data[o].itemCount,item_id:t.data[o].itemsId,price:t.data[o].price};e.totalCost+=t.data[o].itemCount*t.data[o].price,e.$options.methods.getTitle.bind(e)(t.data[o].itemsId),e.itemInfo.push(a)}e.$forceUpdate()}).catch(function(t){console.log(t)})},getTitle:function(t){this.title=[];var e=this;this.$myAxios.get("/ebook/findBooks",{params:{book_id:t}}).then(function(t){console.log(t.data.title),e.title.push(t.data.title),e.$forceUpdate()}).catch(function(t){console.log(t)})}}},H=Z,J=(o("b4cb"),Object(u["a"])(H,F,q,!1,null,"2d7c3a13",null)),W=J.exports,K=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"register"},[o("el-container",[o("el-header",[o("el-row",[o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toMain}},[t._v("全部商品分类")])],1)],1),o("el-main",[o("el-form",{staticClass:"form"},[o("el-row",[o("h2",[t._v("e-book注册")])]),o("el-row",[o("hr")]),o("el-form-item",[o("el-row",[o("el-input",{staticClass:"input",attrs:{placeholder:"姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),o("el-form-item",[o("el-row",[o("el-input",{staticClass:"input",attrs:{placeholder:"用户密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),o("el-form-item",[o("el-row",[o("el-input",{staticClass:"input",attrs:{placeholder:"再次输入密码","show-password":""},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1)],1),o("el-form-item",[o("el-row",[o("el-input",{staticClass:"input",attrs:{placeholder:"手机"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),o("el-form-item",[o("el-row",[o("el-input",{staticClass:"input",attrs:{placeholder:"邮箱"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),o("el-form-item",[o("el-row",[o("el-select",{staticClass:"input",attrs:{placeholder:"身份"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[o("el-option",{attrs:{value:"user",label:"用户"}}),o("el-option",{attrs:{value:"manager",label:"管理员"}})],1)],1)],1),o("el-row",[o("el-button",{staticClass:"button",attrs:{type:"success",round:""},on:{click:t.Register}},[t._v("注册")])],1)],1)],1),o("el-footer",[o("p",[t._v("购物指南")])])],1)],1)},Q=[],X={name:"Register",data:function(){return{id:"",password:"",name:"",phone:"",email:"",status:"",password2:""}},methods:{Register:function(){if(this.password==this.password2){var t=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,e=t.test(this.email);if(!e)return alert("邮箱格式不正确，请重新输入！"),!1;var o=this;this.$myAxios.get("/ebook/addUser",{params:{password:this.password,name:this.name,phone:this.phone,email:this.email,status:o.status}}).then(function(t){console.log(t),"200"==t.status?(alert("申请成功，您的账号id为"+t.data),console.log(t.data.name),o.$router.push({path:"/login"})):alert("请您按照格式申请")}).catch(function(t){console.log(t)}).then(function(){})}else alert("两次密码不一致")},toMain:function(){this.$router.push({path:"/"})}}},tt=X,et=(o("23bf"),Object(u["a"])(tt,K,Q,!1,null,"5c560bb4",null)),ot=et.exports,at=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"Table"},[o("el-container",[o("el-header",[o("el-row",[o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toMain}},[t._v("全部商品分类")]),o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.beginAdd}},[t._v("增加书籍")]),o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.touserManager}},[t._v("管理用户")]),o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toorderManager}},[t._v("管理订单")]),o("el-dialog",{attrs:{title:"编辑新增的书籍信息",visible:t.addVisible,width:"50%"},on:{"update:visible":function(e){t.addVisible=e}}},[o("el-row",[t._v("编码:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的ISBN编码"},model:{value:t.newBook_id,callback:function(e){t.newBook_id=e},expression:"newBook_id"}})],1),o("el-row",[t._v("书名:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的书名"},model:{value:t.newTitle,callback:function(e){t.newTitle=e},expression:"newTitle"}})],1),o("el-row",[t._v("作者:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的作者"},model:{value:t.newAuthor,callback:function(e){t.newAuthor=e},expression:"newAuthor"}})],1),o("el-row",[t._v("语言:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的语言"},model:{value:t.newLanguage,callback:function(e){t.newLanguage=e},expression:"newLanguage"}})],1),o("el-row",[t._v("价格:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的价格"},model:{value:t.newPrice,callback:function(e){t.newPrice=e},expression:"newPrice"}})],1),o("el-row",[t._v("库存:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的库存"},model:{value:t.newStock,callback:function(e){t.newStock=e},expression:"newStock"}})],1),o("el-row",[o("span",[o("label",[t._v("封面: ")])]),o("span",[o("input",{ref:"file",attrs:{type:"file",accept:"image/*",id:"file"}})])]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button-group",[o("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:t.handleAdd}},[t._v("确 定")])],1)],1)],1)],1)],1),o("el-main",[o("el-row",[o("div",{staticClass:"block"},[o("span",{staticClass:"demonstration"}),o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始日期时间"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),o("span",{staticClass:"demonstration"}),o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}),o("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入要查询销量的ISBN编码","prefix-icon":"el-icon-search"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}}),o("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.searchBookSale(t.value1,t.value2,t.value3)}}},[t._v("开始查询")])],1)]),o("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入搜索的书名","prefix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bookData.filter(function(e){return!t.search||e.title.includes(t.search)}),stripe:""}},[o("el-table-column",[o("el-table-column",{attrs:{prop:"book_id",label:"ISBN编号",sortable:""}}),o("el-table-column",{attrs:{prop:"title",label:"书名",sortable:""}}),o("el-table-column",{attrs:{prop:"author",label:"作者",sortable:""}}),o("el-table-column",{attrs:{prop:"language",label:"语言",sortable:""}}),o("el-table-column",{attrs:{prop:"price",label:"价格",sortable:""}}),o("el-table-column",{attrs:{prop:"stock",label:"库存",sortable:""}}),o("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.beginEdit(e.$book_id,e.row)}}},[t._v("Edit")]),o("el-dialog",{attrs:{title:"编辑书籍信息",visible:t.editVisible,width:"50%"},on:{"update:visible":function(e){t.editVisible=e}}},[o("el-row",[t._v("ISBN编码:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的ISBN编码"},model:{value:t.newBook_id,callback:function(e){t.newBook_id=e},expression:"newBook_id"}})],1),o("el-row",[t._v("书名:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的书名"},model:{value:t.newTitle,callback:function(e){t.newTitle=e},expression:"newTitle"}})],1),o("el-row",[t._v("作者:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的作者"},model:{value:t.newAuthor,callback:function(e){t.newAuthor=e},expression:"newAuthor"}})],1),o("el-row",[t._v("价格:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的价格"},model:{value:t.newPrice,callback:function(e){t.newPrice=e},expression:"newPrice"}})],1),o("el-row",[t._v("库存:   "),o("el-input",{staticClass:"input",staticStyle:{left:"auto"},attrs:{placeholder:"新的库存"},model:{value:t.newStock,callback:function(e){t.newStock=e},expression:"newStock"}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button-group",[o("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:function(o){t.handleEdit(e.$book_id,e.row)}}},[t._v("确 定")])],1)],1)],1),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.$book_id,e.row)}}},[t._v("Delete")])]}}])})],1)],1)],1),o("el-footer",[t._v("购物指南")])],1)],1)},nt=[],it={name:"Table",data:function(){return{search:"",bookData:[],addVisible:!1,editVisible:!1,newBook_id:null,newAuthor:"",newTitle:"",newLanguage:"Chinese",newPrice:"",newStock:1,newPic:null,cover:"",dialogImageUrl:"",dialogVisible:!1,value1:"",value2:"",value3:null}},mounted:function(){this.loadBook()},methods:{beginAdd:function(){this.addVisible=!0},handleAdd:function(){var t=this.$refs.file.files[0],e=this;this.addVisible=!1;var o=new FormData;o.set("book_id",e.newBook_id),o.set("title",e.newTitle),o.set("author",e.newAuthor),o.set("language",e.newLanguage),o.set("price",e.newPrice),o.set("stock",e.newStock),o.append("cover",t),e.$myAxios({method:"post",url:"/ebook/addBook",data:o,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(t){console.log(t),t.data&&alert("添加书籍成功")}).catch(function(t){console.log(t)}).then(function(){e.bookData=[],e.$options.methods.loadBook.bind(e)()})},beginEdit:function(t,e){this.editVisible=!0,this.newBook_id=e.book_id,this.newTitle=e.title,this.newAuthor=e.author,this.newPrice=e.price,this.newStock=e.stock},handleEdit:function(t,e){var o=this;this.editVisible=!1,console.log(e.book_id,e.author,e.title,e.language,e.price,e.stock),this.$myAxios.get("/ebook/editBook",{params:{book_id:this.newBook_id,title:this.newTitle,author:this.newAuthor,price:this.newPrice,stock:this.newStock}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}).then(function(){o.newBook_id=null,o.newTitle=null,o.newAuthor=null,o.newPrice=null,o.newStock=null,o.bookData=[],o.$options.methods.loadBook.bind(o)()})},handleDelete:function(t,e){var o=this;this.editVisible=!1,console.log(e.book_id,e.author,e.title,e.language,e.price,e.stock),this.$myAxios.get("/ebook/deleteBook",{params:{book_id:e.book_id}}).then(function(t){console.log(t),"删除成功"==t.data&&alert("删除成功")}).catch(function(t){console.log(t)}).then(function(){o.bookData=[],o.$options.methods.loadBook.bind(o)()})},toMain:function(){this.$router.push({path:"/"})},touserManager:function(){this.$router.push({path:"/userManager"})},toorderManager:function(){this.$router.push({path:"/orderManager"})},loadBook:function(){var t=this,e=this;this.$myAxios.get("/ebook/allBooks").then(function(o){for(var a=0;a<o.data.length;a++){var n={book_id:o.data[a].book_id,title:o.data[a].title,author:o.data[a].author,language:o.data[a].language,price:o.data[a].price,stock:o.data[a].stock};e.bookData.push(n)}t.$forceUpdate()}).catch(function(t){console.log(t)})},handleRemove:function(t,e){return console.log(t,e),t},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},searchBookSale:function(t,e,o){this.$myAxios.get("/ebook/searchBookSale",{params:{book_id:o,start:t.toString(),end:e.toString()}}).then(function(t){alert("该书籍的销量为"+t.data)}).catch(function(t){console.log(t)})}}},lt=it,rt=Object(u["a"])(lt,at,nt,!1,null,"fa66a460",null),st=rt.exports,ct=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"Table"},[o("el-container",[o("el-header",[o("el-row",[o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toMain}},[t._v("全部商品分类")]),o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toTable}},[t._v("总管理界面")])],1)],1),o("el-main",[o("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userData.filter(function(e){return!t.search||e.name.includes(t.search)}),stripe:""}},[o("el-table-column",[o("el-table-column",{attrs:{prop:"user_id",label:"用户账号",sortable:""}}),o("el-table-column",{attrs:{prop:"name",label:"用户名",sortable:""}}),o("el-table-column",{attrs:{prop:"status",label:"角色",sortable:""}}),o("el-table-column",{attrs:{prop:"usable",label:"可用吗",sortable:""}}),o("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.unabled(e.row)}}},[t._v("禁用")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.abled(e.row)}}},[t._v("解禁")])]}}])})],1)],1)],1),o("el-footer",[t._v("购物指南")])],1)],1)},ut=[],dt={name:"userManager",data:function(){return{search:null,userData:[]}},mounted:function(){this.loadUser()},methods:{toMain:function(){this.$router.push({path:"/"})},toTable:function(){this.$router.push({path:"/Table"})},unabled:function(t){var e=this;this.$myAxios.get("/ebook/unableUser",{params:{id:t.user_id}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}).then(function(){e.userData=[],e.$options.methods.loadUser.bind(e)()})},abled:function(t){var e=this;this.$myAxios.get("/ebook/ableUser",{params:{id:t.user_id}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}).then(function(){e.userData=[],e.$options.methods.loadUser.bind(e)()})},loadUser:function(){var t=this,e=this;this.$myAxios.get("/ebook/allUsers").then(function(o){for(var a=0;a<o.data.length;a++){var n={user_id:o.data[a].id,name:o.data[a].name,status:o.data[a].status,usable:o.data[a].usable};e.userData.push(n)}t.$forceUpdate()}).catch(function(t){console.log(t)})}}},pt=dt,ht=Object(u["a"])(pt,ct,ut,!1,null,"5605f9ba",null),bt=ht.exports,mt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"Table"},[o("el-container",[o("el-header",[o("el-row",[o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toMain}},[t._v("全部商品分类")]),o("el-button",{attrs:{type:"danger",width:"30%",position:"relative"},on:{click:t.toTable}},[t._v("总管理界面")])],1)],1),o("el-main",[o("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入用户账号","prefix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),o("div",{staticClass:"block"},[o("span",{staticClass:"demonstration"}),o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始日期时间"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),o("span",{staticClass:"demonstration"}),o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}),o("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.searchOrder(t.value1,t.value2)}}},[t._v("开始查询")])],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderData.filter(function(e){return!t.search||e.user_id.toString().includes(t.search)}),stripe:""}},[o("el-table-column",[o("el-table-column",{attrs:{prop:"order_id",label:"订单号",sortable:""}}),o("el-table-column",{attrs:{prop:"order_time",label:"订单时间",sortable:""}}),o("el-table-column",{attrs:{prop:"user_id",label:"用户账号",sortable:""}}),o("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.orderInfo(e.row.order_id)}}},[t._v("查看订单详情")]),o("el-dialog",{attrs:{title:"订单详情",visible:t.orderVisible,width:"30%"},on:{"update:visible":function(e){t.orderVisible=e}}},[t._l(t.itemInfo.length,function(e){return o("div",{key:e,staticClass:"text item",attrs:{align:"left"}},[o("hr"),o("el-row",[t._v("书的ISBN号: "+t._s(t.itemInfo[e-1].item_id+" "))]),o("el-row",[t._v("书名: "+t._s(t.title[e-1]+" "))]),o("el-row",[t._v("数量: "+t._s(t.itemInfo[e-1].item_count+" "))]),o("el-row",[t._v("价格:"+t._s(t.itemInfo[e-1].price+" "))]),o("el-row",[t._v("总价:"+t._s(t.itemInfo[e-1].price*t.itemInfo[e-1].item_count+" "))]),o("hr")],1)}),o("div",[o("el-row",[t._v("共计:"+t._s(t.totalCost))])],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button-group",[o("el-button",{on:{click:function(e){t.orderVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.orderVisible=!1}}},[t._v("确 定")])],1)],1)],2)]}}])})],1)],1)],1),o("el-footer",[t._v("购物指南")])],1)],1)},ft=[],gt={name:"orderManager",data:function(){return{search:"",orderData:[],orderVisible:!1,itemInfo:[],title:[],totalCost:0,value1:"",value2:""}},mounted:function(){this.loadAllOrder()},methods:{toMain:function(){this.$router.push({path:"/"})},toTable:function(){this.$router.push({path:"/Table"})},loadAllOrder:function(){var t=this;this.$myAxios.get("/ebook/allUserOrders").then(function(e){console.log(e.data);for(var o=0;o<e.data.length;o++){var a={order_id:e.data[o].id,order_time:t.timeFormat(e.data[o].orderTime),user_id:e.data[o].user_id};console.log(e.data[o].orderTime),t.orderData.push(a)}t.$forceUpdate()}).catch(function(t){console.log(t)})},searchOrder:function(t,e){console.log(t+"   "+e),this.orderData=[];var o=this;this.$myAxios.get("/ebook/searchOrders",{params:{start:t.toString(),end:e.toString()}}).then(function(t){console.log(t.data);for(var e=0;e<t.data.length;e++){var a={order_id:t.data[e].id,order_time:o.timeFormat(t.data[e].orderTime),user_id:t.data[e].user_id};o.orderData.push(a)}o.$forceUpdate()}).catch(function(t){console.log(t)})},timeFormat:function(t){var e=new Date(t),o=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),i=e.getHours(),l=e.getMinutes(),r=e.getSeconds(),s=o+"/";return a<10&&(s+="0"),s+=a+"/",n<10&&(s+="0"),s+=n+" ",i<10&&(s+="0"),s+=i+":",l<10&&(s+="0"),s+=l+":",r<10&&(s+="0"),s+=r,s},orderInfo:function(t){this.title=[],this.itemInfo=[],this.totalCost=0,this.orderVisible=!0;var e=this;this.$myAxios.get("/ebook/orderInfo",{params:{oid:t}}).then(function(t){console.log(t.data);for(var o=0;o<t.data.length;o++){var a={item_count:t.data[o].itemCount,item_id:t.data[o].itemsId,price:t.data[o].price};e.totalCost+=t.data[o].itemCount*t.data[o].price,e.$options.methods.getTitle.bind(e)(t.data[o].itemsId),e.itemInfo.push(a)}e.$forceUpdate()}).catch(function(t){console.log(t)})},getTitle:function(t){this.title=[];var e=this;this.$myAxios.get("/ebook/findBooks",{params:{book_id:t}}).then(function(t){console.log(t.data.title),e.title.push(t.data.title),e.$forceUpdate()}).catch(function(t){console.log(t)})}}},kt=gt,vt=Object(u["a"])(kt,mt,ft,!1,null,"314ba795",null),_t=vt.exports;a["default"].use(h["a"]);var wt,yt,Ct=new h["a"]({mode:"history",base:"",routes:[{path:"/",name:"home",component:D},{path:"/about",name:"about",component:function(){return o.e("about").then(o.bind(null,"f820"))}},{path:"/book",name:"book",component:L},{path:"/login",name:"login",component:U},{path:"/shopCar",name:"shopCar",component:N},{path:"/myOrder",name:"myOrder",component:W},{path:"/Register",name:"Register",component:ot},{path:"/Table",name:"Table",component:st},{path:"/userManager",name:"userManager",component:bt},{path:"/orderManager",name:"orderManager",component:_t}]}),xt=o("bc3a"),Dt=o.n(xt),$t=0,Bt="User",Ot=0,At=0,St="",Lt="",Vt="",It=0,Tt=0,Mt={id:$t,name:Bt,isLogin:Ot,book_id:At,title:St,author:Lt,language:Vt,price:It,stock:Tt},jt=Mt,Ut=Object(u["a"])(jt,wt,yt,!1,null,"796bcb10",null),Pt=Ut.exports;a["default"].prototype.$myAxios=Dt.a,a["default"].prototype.GLOBAL=Pt,a["default"].use(i.a),a["default"].config.productionTip=!1,new a["default"]({router:Ct,render:function(t){return t(p)}}).$mount("#app")},6940:function(t,e,o){"use strict";var a=o("cba6"),n=o.n(a);n.a},"767f":function(t,e,o){t.exports=o.p+"img/dazhe4.95dde4d4.jpg"},"9a08":function(t,e,o){t.exports=o.p+"img/dazhe5.0141b01c.jpg"},a10e:function(t,e,o){"use strict";var a=o("20c7"),n=o.n(a);n.a},b4cb:function(t,e,o){"use strict";var a=o("c3bf"),n=o.n(a);n.a},bb66:function(t,e,o){t.exports=o.p+"img/dazhe.2aeb53d1.jpg"},c3bf:function(t,e,o){},cba6:function(t,e,o){},e2b9:function(t,e,o){},fe94:function(t,e,o){t.exports=o.p+"img/dazhe3.25ae33a4.jpg"}});
//# sourceMappingURL=app.89543981.js.map